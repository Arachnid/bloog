{% extends "base.html" %}

{% if article.embedded_code %}
{% block head %}
<link type="text/css" rel="stylesheet" href="/static/syntaxhighlighter/SyntaxHighlighter.css"></link>
<meta name="description" content="{{article.html|description}}" />
{% endblock %}
{% endif %}

{% block first_column %}
<div id="mainCol" class="fix"><a name="main"></a>
{% if article %}
    <h2><a id="blogtitle" href="/{{ article.permalink }}" title="{{ article.title }}">{{ article.title }}</a></h2>
    <p class="post-info">
        Posted by <a href="/author/{{article.author.nick|urlencode}}">{{article.author.name}}</a>
        {% if article.tags %}
            | Filed under
            {% for tag in article.tags %}
            <a href="/tag/{{tag|urlencode}}">{{tag}}</a>{% if not forloop.last %},{% endif %}
            {% endfor %}
        {% endif %}
    </p>
    <div id="blogbody" class="entry">
        {{ article.html }}
    </div>
    <p class="post-footer">
        {% if article.num_comments %}
        <a href="#comments">Comments ({{article.num_comments}})</a> |
        {% endif %}
        <span class="date">{{article.published.date}}</span>
        {% if show_edit_controls %}
        <span class="articlebtn"><a id="editbtn" href="#">Edit</a></span>
        <span class="articlebtn"><a id="deletebtn" href="#">Delete</a></span>
        {% endif %}
    </p>
{% else %}
    <h2>No Article at Given Address</h2>
    <p>You seem to have found a mis-linked page or search query with no associated results.</p>
    <p>Please trying your search again. 
        If you feel that you should be staring at something a little more concrete, feel free to email the author of this site 
        or browse the archives.</p>
{% endif %}
    {% if allow_comments or article.num_comments %}
    <div id="comments_wrapper">
        <h3 id="comments"><span id="num_comments">{{article.num_comments}}</span> Responses</h3>
        <ol class="commentlist" id="commentslist">
            {% for comment in article.comments %}
            {% include "comment.html" %}
            {% endfor %}
        </ol>
        {% if allow_comments %}
        <h3 id="respond"><a class="replybtn" href="#">Add a comment...</a></h3>
        {% else %}
        <p>Comments are closed</p>
        {% endif %}
    </div>
    {% endif %}
</div>
{% endblock %}

{% block end_body %}

{% if allow_comments %}
{% include "form_comment.html" %}
{% endif %}

{% if article.embedded_code %}
<script language="javascript" src="/static/syntaxhighlighter/shCore.js"></script>
{% for language in article.embedded_code %}
<script language="javascript" src="/static/syntaxhighlighter/shBrush{{ language }}.js"></script>
{% endfor %}
<script language="javascript">
dp.SyntaxHighlighter.ClipboardSwf = '/static/syntaxhighlighter/clipboard.swf';
dp.SyntaxHighlighter.HighlightAll('code');
</script>
{% endif %}

{% endblock %}

{% block third_column %}
{% if not is_big %}
{% include 'ads.html' %}
{% endif %}
{% endblock %}